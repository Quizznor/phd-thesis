\documentclass[a4paper, 11pt, twoside]{book}

\usepackage[utf8]{inputenc}
% \usepackage[T1]{fontenc}
\usepackage[ngerman, english]{babel}
\usepackage[margin=1.1in]{geometry}
\usepackage{amsfonts, amstext, amssymb}
\usepackage{amsmath}
\usepackage{mathtools}
\usepackage{graphicx}
\usepackage[export]{adjustbox}
\usepackage{ae, aecompl}
\usepackage{listings}
\usepackage[binary-units]{siunitx}
\usepackage{rotating}
\usepackage{subfig}
\usepackage{mparhack}
\usepackage[printonlyused, footnote, withpage]{acronym}
\usepackage[table]{xcolor}
\usepackage{changes}
\usepackage{blindtext}

\usepackage[b]{esvect}    % For \vv
\usepackage{tikz}         % For arrow and dots in \xvec

\usepackage{xparse}

% this block for listings is just for the example.tex
\usepackage{listings}
\lstset{
    frame=single,
    breaklines=true,
    postbreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\color{red}\hookrightarrow\space}}
}
\lstdefinelanguage{numpy}{
    keywords = {
        and,del,from,not,while,
        as,elif,global,or,with,
        assert,else,if,pass,yield,
        break,except,import,print,
        class,exec,in, raise,continue,
        finally,is, return,def,for,
        lambda,try
    },
    morekeywords = {numpy,fft,mean}
}

\usepackage{color}
\definecolor{darkred}{rgb}{0.5,0,0}
\definecolor{firebrick}{rgb}{0.75,0.125,0.125}
\definecolor{darkgreen}{rgb}{0,0.5,0}
\definecolor{lightgray}{gray}{0.9}
\definecolor{gray}{rgb}{0.4,0.4,0.4}
\definecolor{darkblue}{rgb}{0.0,0.0,0.6}
\definecolor{cyan}{rgb}{0.0,0.6,0.6}

\lstset{
  basicstyle=\ttfamily,
  columns=fullflexible,
  showstringspaces=false,
  commentstyle=\color{gray}\upshape
}

\lstdefinelanguage{XML}
{
  basicstyle=\ttfamily\color{darkblue}\bfseries\footnotesize,
  morestring=[b]",
  morestring=[s]{>}{<},
  morecomment=[s]{<?}{?>},
  stringstyle=\color{black},
  identifierstyle=\color{darkblue},
  keywordstyle=\color{cyan},
  morekeywords={xmlns,version,type},
  breaklines=true
}

%\usepackage[mathlines,switch]{lineno}

\usepackage{etoolbox}
\AtBeginEnvironment{acronym}{%
  \renewcommand*\descriptionlabel[1]{\hspace\labelsep
                                \normalfont\bfseries\color{grey} #1}}

% adjust colour of acronyms
\makeatletter
\AtBeginDocument{%
  \renewcommand*{\AC@hyperlink}[2]{%
    \begingroup
      \hypersetup{hidelinks}%
      \hyperlink{#1}{#2}%
    \endgroup
  }%
}
\makeatother

\usepackage[rightcaption]{sidecap}
\sidecaptionvpos{figure}{t}

\usepackage{booktabs}
\usepackage{eurosym}
\usepackage{KITtitle}
\usepackage{todonotes}
\usepackage{python}
\usepackage{xspace}

\usepackage[activate={true,nocompatibility},final,tracking=true,kerning=true,spacing=true,factor=1100,stretch=10,shrink=10]{microtype}
% activate={true,nocompatibility} - activate protrusion and expansion
% final - enable microtype; use "draft" to disable
% tracking=true, kerning=true, spacing=true - activate these techniques
% factor=1100 - add 10% to the protrusion amount (default is 1000)
% stretch=10, shrink=10 - reduce stretchability/shrinkability (default is 20/20)

\SetTracking{encoding={*}, shape=sc}{40}

\usepackage[Conny]{fncychap}
\ChTitleAsIs

% Paket caption muss _nach_ rotating und subfigure eingebunden werden!!
\usepackage[labelfont=bf,font=small,margin=10pt,format=plain,tableposition=top]{caption}

% from colin
\clubpenalty = 10000 % Disable single lines at the start of a paragraph (Schusterjungen)
\widowpenalty = 10000
\displaywidowpenalty = 10000 % Disable single lines at the end of a paragraph (Hurenkinder)

% title of this piece of work
\newcommand{\thetitle}{Your Title}

\usepackage{hyperref}
\hypersetup{
  pdfsubject = {Ph.D. thesis},
  pdftitle = {\thetitle},
  pdfauthor = {Your Name},
  pdfcreator = {LaTeX, pdfTeX},
  pdfkeywords = {astroparticle physics, ultra-high energy cosmic rays, Pierre Auger Observatory, flux measurement, energy spectrum, mass composition, mass discrimination, shower universality, anisotropy, magnetic lensing},
  colorlinks = true,
  plainpages = false,
  linkcolor = blue,
  citecolor = magenta,
  urlcolor = blue,
  bookmarksopen = false,
  linktocpage = true
}

\usepackage[numbers,sort&compress]{natbib}

% Describe separation hints here:
\hyphenation{
% Pro-to-koll-in-stan-zen
% Ma-na-ge-ment  Netz-werk-ele-men-ten
% Netz-werk Netz-werk-re-ser-vie-rung
% Netz-werk-adap-ter Fein-ju-stier-ung
% Da-ten-strom-spe-zi-fi-ka-tion Pa-ket-rumpf
% Kon-troll-in-stanz
% Me
}

\title{\thetitle}
\date{}
\author{Your Name}

\extrafloats{100}

\usepackage[capitalize]{cleveref}

\usepackage{mathpazo} % use mathpazo for math fonts
% \usepackage{eulervm}
% \normalfont % we want to avoid annoying warnings

% math mode text style automatically adjusts to surrounding style
% good snippet to make symbols in titles appear in text and bold face without defining them explicitly

\makeatletter
\DeclareRobustCommand*{\bfseries}{%
  \not@math@alphabet\bfseries\mathbf
  \fontseries\bfdefault\selectfont
  \boldmath
}
\makeatother

\input utilities

\graphicspath{{figures/}}
\setcounter{topnumber}{4}
\renewcommand{\topfraction}{1.}
\setcounter{bottomnumber}{0}
\renewcommand{\bottomfraction}{0}
\setcounter{totalnumber}{4}
\renewcommand{\textfraction}{0.}
\renewcommand{\floatpagefraction}{1.}



\begin{document}

\frontmatter

\sisetup{per-mode = symbol,
         detect-all,
         tight-spacing = true,
         separate-uncertainty = true} % if false it will give uncertainty 1.2 +- 0.3 as 1.2(3)

\newpage

% tex file following format specified by the doctoral committee
% fill in with your details
\input title
\color{red}{To note, prior to your final thesis version, you need to have
\large\normalfont{eingereichte} on your title page. For the final version, you instead put \large\normalfont{genehmigte}. This is changed in the KITtitle.sty}
\color{black}
\todo[inline]{make sure you use correct German word on title page.}


% abstract
\input abstract
% german version of your abstract
\input zusammenfassung

\selectlanguage{english}

\let\oldbaselinestretch=\baselinestretch%
\renewcommand{\baselinestretch}{1.15}%
\large\normalsize%

% tex file with your acronyms defined...you must do this
% will auto-generate this page when you use acronyms in your work
\input acronyms

\renewcommand{\baselinestretch}{\oldbaselinestretch}%
\large\normalsize%

\microtypesetup{protrusion=false}
\tableofcontents
\microtypesetup{protrusion=true}

\clearpage

\mainmatter

% \input conventions
% for while you are working, creates a summary of your todos with page numbers
\listoftodos

\input introduction

% separate your chapters into different tex files
% and load them in order like this
\input EXAMPLE

\input summary

\listoftables

\begin{appendix}

\end{appendix}

\input thanks

% \bibliographystyle{pybibtex}
% \bibliographystyle{prsty-mod-hd}
\bibliographystyle{elsarticle-num}
\bibliography{auger,mybib}

\input erklaerung

\end{document}
